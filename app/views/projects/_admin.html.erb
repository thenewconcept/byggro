<div class="bg-slate-50 shadow overflow-hidden rounded-lg my-4">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">Inställningar</h3>
  </div>
  <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
    <dl class="text-sm sm:divide-y sm:divide-gray-200">
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Timpris (est.)</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize"><%= number_to_currency project.hourly_rate %></dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Bonus</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize"><%= t project.bonus %></dd>
      </div>
    </dl>
  </div>
</div>

<div class="bg-slate-50 shadow overflow-hidden rounded-lg my-4">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">Offert</h3>
  </div>
  <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
    <dl class="text-sm sm:divide-y sm:divide-gray-200">
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Arbetskostnader</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%= number_to_currency project.amount %></dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Materialkostnader</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%= number_to_currency project.material_amount %></dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Övriga kostnader</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%= number_to_currency project.misc_amount %></dd>
      </div>
      <div class="text-gray-800 font-bold py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="">Summa</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%= number_to_currency project.total %></dd>
      </div>
    </dl>
  </div>
</div>

<div class="bg-slate-50 shadow overflow-hidden rounded-lg my-4">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">Projektmål</h3>
  </div>
  <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
    <dl class="text-sm sm:divide-y sm:divide-gray-200">
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Timmar (mål)</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%= project.hours_target %> timmar</dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Löner (cirka)</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">-<%= number_to_currency project.estimated_salaries %></dd>
      </div>
    </dl>
  </div>
</div>

<div class="bg-slate-50 shadow overflow-hidden rounded-lg my-4">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">
      Bonus <%= t project.bonus %>
    </h3>
  </div>

  <%= render partial: "projects/bonus/#{project.bonus}", locals: { project: project } %>
</div>

<div class="bg-slate-50 shadow overflow-hidden rounded-lg my-4">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">
      Rapporter
    </h3>
    <ul class="list-disc ml-4 my-2 text-sm">
      <% project.reports.each do |report| %>
      <li class="py-1"> 
        <%= link_to edit_project_checklist_report_path(project, report.checklist, report) do %>
        <p><%= l report.date  %> | <%= report.worker.user.email  %> | <%= report.time_in_minutes / 60 %> timmar @ <%= report.checklist.title %></p>
        <p class="text-xs text-gray-500 my-1"><%= report.note  %></p>
        <% end %>
      </li>
      <% end %>
    </ul>
  </div>

</div>

<% if project.is_rot? %>
<div class="bg-white shadow overflow-hidden rounded-lg">
  <div class="px-4 py-5 sm:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">ROT</h3>
  </div>
  <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
    <dl class="text-sm sm:divide-y sm:divide-gray-200">
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Timmar</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">

          <div data-controller="clipboard">
            <span data-clipboard-target="source" data-value="<%= project.hours_target  %>">
              ca <%= project.hours_target %> timmar
            </span>
            <button data-action="clipboard#copy">
              <%= heroicon('duplicate', variant: :outline, options: {class: 'text-gray-400 hover:text-gray-600 h-4 w-4'}) %>
            </button>
          </div>

        </dd>
      </div>

      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Material inkl. moms</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= render partial: 'shared/clipboard_value', locals: { amount: project.inc_vat(project.material_amount) } %>
        </dd>
      </div>

      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Övrigt inkl. moms</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= render partial: 'shared/clipboard_value', locals: { amount: project.inc_vat(project.misc_amount) } %>
        </dd>
      </div>

      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Arbetskostnad Kund</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= render partial: 'shared/clipboard_value', locals: { amount: project.client_costs } %>
        </dd>
      </div>

      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">Inbetalt Kund</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= render partial: 'shared/clipboard_value', locals: { amount: project.client_payed } %>
        </dd>
      </div>

      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class=" font-medium text-gray-500">ROT</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= render partial: 'shared/clipboard_value', locals: { amount: project.rot } %>
        </dd>
      </div>
    </dl>
  </div>
</div>
<% end %>