<div class="mb-5">
  <turbo-frame id="<%= dom_id checklist %>">

    <%= turbo_frame_tag dom_id(checklist, :title) do %>
      <h6 class="block"><%= link_to_if policy(:checklist).create?, checklist.title, edit_project_checklist_path(checklist.project, checklist) %></h6>
      <p class="py-1.5 text-xs">

        <%= tag.span(class: 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800') do %>
          <%= heroicon('document-report', variant: :outline, options: { class: 'h-3 w-3 mr-1' }) %> <%= checklist.hours_target %> timmar 
        <% end %>

        <%= tag.span(class: 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800') do %>
          <%= heroicon('clock', variant: :outline, options: { class: 'h-3 w-3 mr-1' }) %> <%= checklist.reports.sum(&:time_in_hours).round(2) %> timmar 
        <% end %>

        <%= tag.span(class: 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800') do %>
          <%= heroicon('eye', variant: :outline, options: { class: 'h-3 w-3 mr-1' }) %>   <%= number_to_currency(checklist.amount)%>
        <% end if policy(:project).create? %>
      </p>
    <% end %>

    <div class="my-2">
      <ul
        data-controller="sortable"
        data-sortable-animation-value="250"
        data-sortable-param-name-value="todo[position]"
        >
      <%= checklist.todos.present? \
        ? render(checklist.todos) \
        : content_tag(:li, 'Inget här just nu …', class: 'my-3 text-sm italic text-gray-400') %>
      </ul>
    </div>

    <div class="p-3 bg-gray-100 rounded-md">
      <%= turbo_frame_tag "new_report" do %>
        <%= link_to heroicon('plus-circle', options: { class: 'h-4 w-4 mr-1'}) + "Tidrapport", new_project_checklist_report_path(checklist.project, checklist), class: "inline-flex items-center px-2 py-1 border border-transparent shadow-sm text-xs leading-4 font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" if policy(:report).create? %>
      <% end %>
      <%= turbo_frame_tag "new_todo" do %>
        <%= link_to "Ny uppgift", new_project_checklist_todo_path(checklist.project, checklist), class: "inline-flex items-center px-2 py-1 border border-transparent shadow-sm text-xs leading-4 font-medium rounded-md text-white bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" if policy(:todo).create? %>
      <% end %>
    </div>

  </turbo-frame>
</div>